/* ===== Root palette (mono/duo) ===== */
:root{
  --bg: #ffffff;
  --fg: #0b0f15;          /* near-black text */
  --muted: #6b7280;       /* subtle copy */
  --accent: #0ea5a2;      /* hover/active */
  --land: #eef2f5;        /* land fill */
  --border: #cfd8e3;      /* country borders */
  --maxw: 1600px;
}

/* ===== Page frame ===== */
*{ box-sizing: border-box }
html, body{ height:100% }
body{
  margin:0;
  color:var(--fg);
  background:var(--bg);
  font:16px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}

/* Thin header with glyph only */
.site-head{
  display:flex; align-items:center;
  height:44px; padding-inline:16px;
  border-bottom:1px solid #edf1f5;
}
.brand{
  font-weight:700; letter-spacing:.02em;
  text-decoration:none; color:var(--fg);
  font-size:20px; line-height:1;
}

/* ===== Map layout ===== */
main{ display:flex; justify-content:center; padding:2rem 1rem }
.map-wrap{
  width:100%;
  max-width:var(--maxw);
}

.map { touch-action: none; }

/* Make the SVG fluid and large */
.map, .map svg{
  display:block;
  width:100%;
  height:auto;
}

/* ===== Country shapes ===== */
.map path{
  fill:var(--land)!important;
  stroke:var(--border)!important;
  stroke-width:.6;
  vector-effect:non-scaling-stroke;
  transition:fill .12s ease, stroke .12s ease, stroke-width .12s ease;
}

/* Hover / linked */
.map a{ cursor:pointer; text-decoration:none }
.map path:hover{
  fill:color-mix(in oklab, var(--accent) 18%, var(--land))!important;
  stroke:var(--accent)!important;
  stroke-width:1;
}

.map { cursor: grab; } /* desktop only; no touch-action needed */
#microstates circle{ transform-origin:center; transform-box:fill-box; }


/* Microstate dots */
/* Microstate dots */
#microstates circle{
  fill:var(--fg);
  opacity:.85;
  pointer-events:auto;
  transform-origin:center;
  transform-box:fill-box;      /* <-- key line: fix hover jump */
  transition:transform .12s ease, opacity .12s ease, fill .12s ease, stroke .12s ease;
}
#microstates circle:hover{
  opacity:1;
  transform:scale(1.6);
  fill:var(--accent);
  stroke:var(--bg);
  stroke-width:.6;
}


/* Focus ring for keyboard nav (keeps accessibility without clutter) */
.map a:focus path, .map a:focus-visible path{
  outline:none;
  stroke:var(--accent)!important;
  stroke-width:1.6;
}

/* Motion sensitivity */
@media (prefers-reduced-motion: reduce){
  .map path, #microstates circle{ transition:none }
}

/* Country hover card */
#country-tip{
  position: fixed;
  z-index: 50;
  pointer-events: none;           /* never block clicks/drag */
  background: #fff;
  color: var(--fg);
  border-radius: 0px;
  border:1px solid #edf1f5;  
  width: 340px;
  max-width: min(90vw, 360px);
  opacity: 0;
  transform: translateY(4px);
  transition: opacity .12s ease, transform .12s ease;
}

#country-tip.visible{
  opacity: 1;
  transform: translateY(0);
}

#country-tip .flag{
  display:block;
  width:100%;
  height:120px;            /* reserve space; tweak to taste */
  object-fit:contain;      /* <-- was cover; now shows entire flag */
  background:#fff;         /* neutral gutters for odd ratios */
  border-bottom:1px solid #e5e7eb;
}

#country-tip .body{ padding:12px 14px 14px; }
#country-tip .name{
  font-weight:800;
  letter-spacing:.02em;
  font-size:13px;
  text-transform:uppercase;
}
#country-tip .blurb{
  margin-top: 6px; font-size: 13px; line-height: 1.35; color: var(--muted);
}
